# =============================================================================
# autorepost-dash Production Environment Template
# =============================================================================
# This template is for PRODUCTION deployments (Render.com, Vercel, etc.)
# For local development, use .env.example instead
# =============================================================================

# ------------------------------------------------------------
# Node Environment
# ------------------------------------------------------------
NODE_ENV=production

# ------------------------------------------------------------
# API Service Configuration
# ------------------------------------------------------------
PORT=4000
CORS_ORIGIN=https://your-frontend-domain.com
WEB_APP_URL=https://your-frontend-domain.com
API_VERSION=2.0.0

# ------------------------------------------------------------
# Database (PostgreSQL)
# ------------------------------------------------------------
# Get from: Supabase Dashboard > Settings > Database > Connection String (Direct)
# Format: postgresql://postgres.[PROJECT-REF]:[PASSWORD]@[HOST]:5432/postgres
DATABASE_URL=

# ------------------------------------------------------------
# Supabase Authentication
# ------------------------------------------------------------
# Get from: Supabase Dashboard > Settings > API
SUPABASE_URL=
SUPABASE_SERVICE_ROLE_KEY=
SUPABASE_JWT_SECRET=

# Frontend (Next.js) - Required for static export
NEXT_PUBLIC_SUPABASE_URL=
NEXT_PUBLIC_SUPABASE_ANON_KEY=

# ------------------------------------------------------------
# Redis / BullMQ Job Queue
# ------------------------------------------------------------
# Production: Use Upstash (https://upstash.com)
# Format: rediss://default:[PASSWORD]@[HOST]:6379
REDIS_URL=
REDIS_TLS=true

# ------------------------------------------------------------
# S3-Compatible Object Storage
# ------------------------------------------------------------
# REQUIRED: Configure one of these storage backends

# Option 1: AWS S3 (recommended for production)
S3_REGION=us-east-1
S3_ENDPOINT=
S3_FORCE_PATH_STYLE=false
S3_BUCKET=autorepost-production
S3_ACCESS_KEY_ID=
S3_SECRET_ACCESS_KEY=

# Option 2: Supabase Storage
# S3_REGION=auto
# S3_ENDPOINT=https://[PROJECT-REF].supabase.co/storage/v1/s3
# S3_FORCE_PATH_STYLE=true
# S3_BUCKET=autorepost-media
# S3_ACCESS_KEY_ID=
# S3_SECRET_ACCESS_KEY=

# Option 3: Backblaze B2
# S3_REGION=us-west-004
# S3_ENDPOINT=https://s3.us-west-004.backblazeb2.com
# S3_FORCE_PATH_STYLE=false
# S3_BUCKET=autorepost-media
# S3_ACCESS_KEY_ID=
# S3_SECRET_ACCESS_KEY=

# ------------------------------------------------------------
# Worker Configuration
# ------------------------------------------------------------
WORKER_CONCURRENCY=4
LOG_LEVEL=info

# Optional: Worker metrics endpoint
# METRICS_PORT=9090
# METRICS_HOST=0.0.0.0

# ------------------------------------------------------------
# Security & Encryption
# ------------------------------------------------------------
# CRITICAL: Generate with: npm run generate:token-key
# Must be set before first deployment - changing invalidates all OAuth tokens
TOKEN_ENCRYPTION_KEY=

# ------------------------------------------------------------
# OAuth Platform Credentials (PRODUCTION URLs)
# ------------------------------------------------------------
# Update callback URLs to match your production domain

# Facebook/Instagram (https://developers.facebook.com/apps)
FACEBOOK_APP_ID=
FACEBOOK_APP_SECRET=
FACEBOOK_REDIRECT_URI=https://your-api-domain.com/oauth/instagram/callback

# Google/YouTube (https://console.cloud.google.com/apis/credentials)
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=
GOOGLE_REDIRECT_URI=https://your-api-domain.com/oauth/youtube/callback

# Twitter/X (https://developer.twitter.com/en/portal/dashboard)
TWITTER_CONSUMER_KEY=
TWITTER_CONSUMER_SECRET=
TWITTER_CALLBACK_URL=https://your-api-domain.com/oauth/twitter/callback

# ------------------------------------------------------------
# TikTok Integration (Cookie-based)
# ------------------------------------------------------------
# Export cookies from TikTok session
TIKTOK_COOKIE=
TIKTOK_SESSION_ID=
TIKTOK_WEBID=

# TikTok API rate limiting
RATE_LIMIT_REQUESTS_PER_MINUTE=60
RATE_LIMIT_REQUESTS_PER_HOUR=1000
CACHE_TTL=120
CACHE_MAX_ENTRIES=100
NAVIGATION_TIMEOUT_MS=30000
CONTENT_WAIT_MS=5000
HTTP_FETCH_TIMEOUT_MS=12000
HTTP_MAX_RETRIES=3
TIKTOK_ITEM_LIST_PAGE_SIZE=30
TIKTOK_ITEM_LIST_MAX_PAGES=40
TIKTOK_ITEM_LIST_BUFFER_PAGES=2

# ------------------------------------------------------------
# Observability
# ------------------------------------------------------------
PROMETHEUS_ENABLED=true
